#!/bin/sh -e

# Retrieve package from github mirror of AUR in-case of downtime
# Usage: gityay <package_name>

cur_dir=$(pwd)

package_name=$1
[ -z "$package_name" ] && { echo "Usage: $0 <package_name>"; exit 1; }

cd ~/aur-git || { echo "Directory ~/aur-git does not exist"; exit 1; }

git clone --branch ${package_name} --single-branch https://github.com/archlinux/aur.git $package_name

cd $package_name
makepkg -si --noconfirm
cd ..

rm -rf $package_name

cd "$cur_dir" || exit 1

exit 0
